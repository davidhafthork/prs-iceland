<!DOCTYPE html>
<html lang="is" class="js">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>PRS Iceland</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <!-- Main CSS (includes all component styles and fixes) -->
    <link rel="stylesheet" href="../css/main.css">
    
    <!-- Override for simple gallery -->
    <style>
        .gallery-cell img {
            opacity: 1 !important;
            visibility: visible !important;
            display: block !important;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div id="header-outer" class="transparent">
        <div class="container">
            <div class="row">
                <div class="logo-section">
                    <a id="logo" href="#" data-supplied-ml="false">
                        <img class="stnd logo-svg" width="1368" height="312" src="../images/psr-logo.svg" alt="PRS Iceland" loading="eager">
                    </a>
                </div>
                
                <nav>
                    <ul>
                        <li>
                            <a href="#">Æfingar og mót</a>
                            <ul class="sub-menu">
                                <li><a href="arsyfirlit.html">Ársyfirlit</a></li>
                                <li><a href="#">PRS mótaserían</a></li>
                                <li><a href="#">PR22 mótaserían</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">Úrslit móta</a>
                            <ul class="sub-menu">
                                <li><a href="#">2024</a></li>
                                <li><a href="#">2023</a></li>
                                <li><a href="#">2022</a></li>
                                <li><a href="#">2021</a></li>
                            </ul>
                        </li>
                        <li><a href="#">Meðlimir</a></li>
                        <li><a href="#">Samþykktir</a></li>
                        <li><a href="#">Hafa samband</a></li>
                    </ul>
                </nav>
                
                <div class="mobile-menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-bg"></div>
        <div class="hero-content">
            <div>
                <h1>PRS Iceland</h1>
                <p>Precision Rifle Series Iceland</p>
                <a href="#about" class="cta-button">
                    <span>Skráning í samtökin</span>
                    <svg width="20" height="25" viewBox="0 0 50 80">
                        <polyline points="0, 0 45, 40 0, 80"/>
                    </svg>
                </a>
            </div>
        </div>
    </section>
    
    <!-- About Section -->
    <section id="about" class="about-section">
        <div class="about-container">
            <div class="about-image">
                <img src="https://prsiceland.falala.dev/wp-content/uploads/2024/08/prs-2.jpg" alt="PRS Iceland">
            </div>
            <div class="about-content">
                <h2>Samtökin</h2>
                <p>PRS skotíþróttasamtök Íslands eru nú á sínu fjórða starfsári. Félagið hefur það að markmiði að halda mótaseríur og mót fyrir riffilskotfimi nákvæmnisriffla. Núna eru í gangi tvær mótaseríur, annars vegar PRS serían (Precision Rifle Series) sem er fyrir riffla með miðkveikt caliber og hins vegar PR22 (Precision Rifle .22lr) sem er fyrir riffla með randkveiktu .22lr kaliberi.</p>
                <a href="#" class="cta-button">
                    <span>Skráðu þig</span>
                    <svg width="20" height="25" viewBox="0 0 50 80">
                        <polyline points="0, 0 45, 40 0, 80"/>
                    </svg>
                </a>
            </div>
        </div>
    </section>
    
    <!-- Gallery Section -->
    <section class="gallery-section">
        <div class="gallery-header">
            <h2>Myndir segja þúsund orð!</h2>
        </div>
        <div class="gallery-carousel">
            <div class="gallery-viewport">
                <div class="gallery-slider">
                    <div class="gallery-cell">
                        <img src="https://prsiceland.falala.dev/wp-content/uploads/2024/08/prs-3-1024x566.jpg" alt="PRS Iceland Gallery" width="1024" height="566">
                    </div>
                    <div class="gallery-cell is-selected">
                        <img src="https://prsiceland.falala.dev/wp-content/uploads/2024/08/prs-2-1024x1024.jpg" alt="PRS Iceland Gallery" width="1024" height="1024">
                    </div>
                    <div class="gallery-cell">
                        <img src="https://prsiceland.falala.dev/wp-content/uploads/2024/08/prs-1-1024x682.jpg" alt="PRS Iceland Gallery" width="1024" height="682">
                    </div>
                    <div class="gallery-cell">
                        <img src="https://prsiceland.wordpress.com/wp-content/uploads/2024/04/20240413_155533016_ios.jpg" alt="PRS Iceland Competition">
                    </div>
                </div>
            </div>
            <div class="gallery-progress">
                <div class="gallery-progress-bar" style="width: 25%; transform: translateX(100%);"></div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-info">
                    <p class="footer-address">Stekkjaseli 7<br>109 Reykjavík</p>
                    <p class="footer-kt">Kt: 510321-0810</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 PRS Iceland. Öll réttindi áskilin.</p>
            </div>
        </div>
    </footer>
    
    <!-- Main JavaScript Module -->
    <script type="module" src="../js/main.js"></script>
    
    <!-- Header Script -->
    <script>
        (function() {
            const header = document.getElementById('header-outer');
            function updateHeader() {
                if (window.pageYOffset > 50) {
                    header.classList.add('scrolled');
                    header.classList.remove('transparent');
                } else {
                    header.classList.remove('scrolled');
                    header.classList.add('transparent');
                }
            }
            updateHeader();
            window.addEventListener('scroll', updateHeader);
        })();
    </script>
    
    <!-- Simple Gallery Script -->
    <script>
        (function() {
            const viewport = document.querySelector('.gallery-viewport');
            const slider = document.querySelector('.gallery-slider');
            const cells = document.querySelectorAll('.gallery-cell');
            const progressBar = document.querySelector('.gallery-progress-bar');
            
            if (!viewport || !slider || cells.length === 0) return;
            
            // Preload all images
            const images = [];
            cells.forEach(cell => {
                const img = cell.querySelector('img');
                if (img) {
                    img.loading = 'eager';
                    images.push(img.src);
                }
            });
            
            // Preload
            images.forEach(src => {
                const img = new Image();
                img.src = src;
            });
            
            // Clone for infinite scroll
            const firstClone = cells[0].cloneNode(true);
            const lastClone = cells[cells.length - 1].cloneNode(true);
            slider.appendChild(firstClone);
            slider.insertBefore(lastClone, cells[0]);
            
            // All cells including clones
            const allCells = slider.querySelectorAll('.gallery-cell');
            
            // State
            let current = 1;
            let isTransitioning = false;
            
            // Position
            function goTo(index, smooth = true) {
                if (isTransitioning) return;
                
                current = index;
                let offset = 0;
                
                for (let i = 0; i < current; i++) {
                    offset += allCells[i].offsetWidth + 10;
                }
                
                const centering = (viewport.offsetWidth - allCells[current].offsetWidth) / 2;
                
                slider.style.transition = smooth ? 'transform 0.3s ease' : 'none';
                slider.style.transform = `translateX(${-offset + centering}px)`;
                
                // Update progress for real slides
                if (current > 0 && current < allCells.length - 1) {
                    const realIndex = current - 1;
                    const percent = 100 / cells.length;
                    progressBar.style.width = `${percent}%`;
                    progressBar.style.transform = `translateX(${realIndex * 100}%)`;
                }
                
                // Infinite scroll
                if (smooth) {
                    isTransitioning = true;
                    setTimeout(() => {
                        if (current === 0) {
                            goTo(cells.length, false);
                        } else if (current === allCells.length - 1) {
                            goTo(1, false);
                        }
                        isTransitioning = false;
                    }, 300);
                }
            }
            
            // Drag
            let isDragging = false;
            let startX = 0;
            
            viewport.addEventListener('mousedown', e => {
                isDragging = true;
                startX = e.pageX;
                viewport.style.cursor = 'grabbing';
            });
            
            viewport.addEventListener('mouseup', e => {
                if (!isDragging) return;
                isDragging = false;
                viewport.style.cursor = 'grab';
                
                const diff = e.pageX - startX;
                if (Math.abs(diff) > 50) {
                    goTo(current + (diff > 0 ? -1 : 1));
                } else {
                    goTo(current);
                }
            });
            
            viewport.addEventListener('mouseleave', () => {
                isDragging = false;
                viewport.style.cursor = 'grab';
            });
            
            // Touch
            viewport.addEventListener('touchstart', e => {
                isDragging = true;
                startX = e.touches[0].pageX;
            });
            
            viewport.addEventListener('touchend', e => {
                if (!isDragging) return;
                isDragging = false;
                
                const diff = e.changedTouches[0].pageX - startX;
                if (Math.abs(diff) > 50) {
                    goTo(current + (diff > 0 ? -1 : 1));
                } else {
                    goTo(current);
                }
            });
            
            // Initialize
            goTo(1, false);
            viewport.style.cursor = 'grab';
        })();
    </script>
</body>
</html>